<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Arianna Costanzo">
    <title>Boolzapp</title>
    <!-- bootstraap -->
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css' integrity='sha512-b2QcS5SsA8tZodcDtGRELiGv5SaKSk1vDHDaQRda0htPYWZ6046lr3kJ5bAAQdpV2mmA/4v0wQF9MyU6/pDIAg==' crossorigin='anonymous'/>
    <!-- fontawesome -->
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css' integrity='sha512-Avb2QiuDEEvB4bZJYdft2mNjVShBftLdPG8FJ0V7irTLQ8Uo0qcPxh4Plq7G5tGm0rU+1SPhVotteLpBERwTkw==' crossorigin='anonymous'/>
    <!-- stile -->
    <link rel="stylesheet" href="stile/style.css">
    <!-- vue -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- data -->
    <script src="js/data.js"></script>
    <!-- script -->
    <script src="js/main.js" defer></script>
</head>
<body>
    


    <div id="root" class="row">
        <div id="left-container" class="col-4">
            <!-- header -->
            <header>
                <!-- info user -->
                <div class="user-info">
                    <img :src="`img/avatar${user.avatar}.jpg`" :alt="user.name" class="user-img header-img">
                    <div class="user-name-time">
                        <p class="user-name">{{user.name}}</p>
                    </div>
                </div>
                <!-- icone -->
                <div class="header-icons">
                    <i class="fa-solid fa-circle-notch"></i>
                    <i class="fa-solid fa-message"></i>
                    <i class="fa-solid fa-ellipsis-vertical ms-2"></i>
                </div>
            </header>
            <div id="notification-container">
                <div><i class="fa-solid fa-bell-slash"></i></div>
                <div>
                    <p class="fw-semibold">Ricevi notifiche di nuovi messaggi</p>
                    <p>Attiva notifiche desktop</p>
                </div>
                
            </div>
            <div id="searchbar-container">
                <div class="searchbar-icon"><i class="fa-solid fa-magnifying-glass"></i></div>
                <input type="text" placeholder="Cerca o inizia una nuova chat" v-model="filteredName">
                <button v-show="filteredName" type="button" class="btn-close" aria-label="Close" @click="clearFilter"></button>
            </div>
            <div id="chats-container">
                <ul>
                    <li v-for="contact in filteredContacts" :key="contact.avatar" @click="getCurrentContact(contact.id)">
                        <img :src="`img/avatar${contact.avatar}.jpg`" :alt="contact.name" class="user-img chat-img">
                        <div class="contact-info">
                            <p class="user-name">{{contact.name}}</p>
                            <!-- <p class="last-message" :class="isWriting ? 'writing' : ''">{{ isWriting ? 'Sta scrivendo...' : cutMessage(contact) }}</p> -->
                            <p class="last-message" :class="showIsWritingClass(contact.id)">{{ showIsWriting(contact.id, contact)}}</p>
                            <!-- <p class="last-message">{{cutMessage(contact)}}</p> -->
                        </div>
                        <p class="last-date">{{showDate(contact)}}</p>
                    </li>
                </ul>
            </div>

            
            
        </div>
        <div id="right-container" class="col-8">
            <!-- header -->
            <header>
                <!-- info user -->
                <div class="user-info">
                    <img :src="`img/avatar${currentContact.avatar}.jpg`" :alt="currentContact.name" class="user-img header-img">
                    <div class="user-name-time">
                        <p class="user-name">{{currentContact.name}}</p>
                        <p class="user-time">Ultimo accesso: <span>{{showDate(currentContact)}}</span></p>
                    </div>
                </div>
                <!-- icone -->
                <div class="header-icons position-relative">
                    <i class="fa-solid fa-magnifying-glass"></i>
                    <label for='image-upload' >
                        <input type="file" id="image-upload" accept="image/png, image/jpeg, image/jpg" @change="previewFiles">
                        <i class="fa-solid fa-paperclip"></i>
                    </label>
                    
                    <i class="fa-solid fa-ellipsis-vertical ms-2 " @click="toggleEmpty"></i>
                    <div v-show="showEmpty" class="delete-container">
                        <p @click="emptyChat">Svuota chat</p>
                    </div>
                </div>
            </header>
            <!-- current chat -->
            <section id="current-chat-container">
                
                <div v-for="message in filteredMessages" class="message" :class="isSent(message.status) ? 'sent' : 'received'" :key="message.id" @click="showDelete(message)">
                    <p class="message-text" v-html="message.text"></p>
                    <p class="message-time">{{message.date}}</p>
                    <div v-show="checkIdMessage(message.id)" class="delete-container">
                        <p>Info messaggio</p>
                        <p @click="deleteMessage(message.id)">Cancella messaggio</p>
                    </div>
                </div>
                
                


            </section>
            <!-- footer -->
            <footer>
                <div class="footer-icon"><i class="fa-regular fa-face-smile" @click="printEmoji"></i></div>
                <div class="footer-new-text"><input type="text" placeholder="Scrivi un messaggio" autofocus v-model="textSent" @keyup.enter="sendMessage"></div>
                <div class="footer-icon"><i class="fa-solid fa-microphone"></i></div>
            </footer>
            

        </div>
        

    </div>

</body>
</html>



<!-- sistemare la scrollbar di sinistra -->
<!-- fare qualcosa per info messaggio -->
<!-- fare in modo che se premo il tasto allega invio un immagine random da un mio array -->
<!-- al click della lente di ingrandimento fare apparire un input cojn cui filtrare i messaggi -->
<!-- mettere solo l'orario se il messaggio è di oggi -->
<!-- info messaggio apre un nuovo div a destra, restringendo la chat dove c'è riprodotto visto e consegnato -->
